//untuk create view perkara yang dilihat hakim
CREATE VIEW v_all_perkara_hakim AS
SELECT list_perkara.*, users.nama FROM list_perkara JOIN users ON list_perkara.id_user = users.id
WHERE list_perkara.is_nomor = 1;

//-- end untuk create view perkara yang dilihat hakim


//untuk notifikasi inbox
//jalankan pertama
CREATE TABLE `log_inbox` (
  `id_log_inbox` int(11) NOT NULL,
  `id_perkara` int(11) NOT NULL,
  `no_perkara` varchar(50) NOT NULL,
  `is_read` int(11) NOT NULL,
  `change_date` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

//jalankan kedua
DELIMITER $$
CREATE TRIGGER `insert_log_inbox` AFTER INSERT ON `list_perkara` FOR EACH ROW BEGIN
    INSERT INTO log_inbox (id_log_inbox, id_perkara, no_perkara, is_read, change_date)
    VALUES ("", new.id_perkara, new.no_perkara, 1, now());
END
$$
DELIMITER ;

//--end untuk notifikasi inbox
